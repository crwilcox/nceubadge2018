// Animated Nametag with Rockets and Turtles.

Badge.apps["Node.js FTW Name"] = () => {
  Badge.reset();

  var rocket = Graphics.createImage(`
#####
###########
################
####################
#######################
 #########################
 ############################
 ##############################
  ############       ############
  ##########    ###    ############
   ########   #######    ############
    #######   ########   ##############
    #######    #######   ###############
     ########    ##    ##################
      #########       ##################### #######
       ##################################### ##########
        #################### ################ ##########
         #################     ############### #########
           ############## ###    #############  #########
            #############  ### ## #############  ########
              ############  ##  ##  ############ #########
               ############ ####  ## ###########  ########
                 ###########  ####  #  #########   #######
                #  ###########  #### ##  ##               #
               ###  ############  ###  #  ######
               #####  ############  ###    ########
               #######  ###########  ###   ##########
               ##########  ######  ##  # ##############
              #############  ##  ##################
               ###############   #################
                  ############   ############  ####
                     #########    ####   #####   ###
                        #####     ###      ###
                           ##                ##`);

  var turtle = Graphics.createImage(`
                                            #######
                                        #####      ###      
                     ## #              ###            ##    
               ####  ##  #####        ####           ####   
            ##### ##### ### #####     #                ###  
          #     #### ## ##########  #             ##     #  
        ##         ######      # ##  #           ###      # 
      ###          # ##         # #  ##                  ## 
      ###          ###           ### ##         #         # 
     #####        #####          # ## #       #####      ## 
   # #### ##### #########       ###### ##       ###     ##  
   ###   ###################   ## #  # #        #### ####   
    ##      ################### #### ###        # ####      
  ###      ####     #######      ###  ##     ###            
 ####     ## #          ##        #######  #  #             
########  ####          ###        # #  #   ##              
##   ## #### ###        ### ### ### ####  # #               
###  ###  ### ## #     #################  ##                
## ## ## ##   ## ####  ##   ####   ###    ###               
 ### ######    ######   # #### #####    # #                 
   ### ##### ## #####    # #######      #N#                 
   #####   ## # ########## ###         ###                  
     ####                               ##                  
          ##        ####    #  #        ###                 
          #        ## ##########         ##                 
          ##       ##         ###       ##                  
         #####    ###         ### # # ####                  
            # ######            ### # #`);

  var rocketWidth = 60;
  var initialRocketPosition = 40 + rocketWidth;
  var rocketPos = initialRocketPosition;
  var initialTurtlePosition = -60;
  var turtlePos = initialTurtlePosition;
  var onFrame = () => {
    g.clear();

    // Draw Turtle
    g.drawImage(turtle, turtlePos++, 0);
    if (turtlePos > 130) {
      turtlePos = initialTurtlePosition;
    }

    // Draw Rocket
    g.drawImage(rocket, --rocketPos, --rocketPos);
    if (rocketPos < -rocketWidth) {
      rocketPos = initialRocketPosition;
    }

    // Draw Name
    g.setFontVector(15);
    var name = Badge.NAME.join(" ");
    g.drawString(name, 0, 44);
    g.setFontVector(10);

    g.flip();
  };

  setInterval(onFrame, 75);

  setWatch(Badge.menu, BTN1);
};
